{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\dejay\\\\Documents\\\\UofT\\\\Project 3\\\\next-step\\\\next-step\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{useQuery}from\"@apollo/react-hooks\";import{useQuestionContext}from\"../../utils/GlobalState\";import{UPDATE_CATEGORIES,UPDATE_CURRENT_CATEGORY}from\"../../utils/actions\";import{QUERY_CATEGORIES}from\"../../utils/queries\";import{idbPromise}from\"../../utils/helpers\";import logoImage from\"./assets/images/Logo.png\";import{Navbar,Nav,Container}from\"react-bootstrap\";import{BsPersonPlusFill,BsPersonCheckFill,BsFillPencilFill}from\"react-icons/bs\";import\"./assets/css/nav.css\";import Auth from\"../../utils/auth\";import{Link}from\"react-router-dom\";function NavBar(){var _useQuestionContext=useQuestionContext(),_useQuestionContext2=_slicedToArray(_useQuestionContext,2),state=_useQuestionContext2[0],dispatch=_useQuestionContext2[1];var categories=state.categories;var _useQuery=useQuery(QUERY_CATEGORIES),loading=_useQuery.loading,categoryData=_useQuery.data;useEffect(function(){if(categoryData){console.log(categoryData);dispatch({type:UPDATE_CATEGORIES,categories:categoryData.categories});categoryData.categories.forEach(function(category){idbPromise(\"categories\",\"put\",category);});}else if(!loading){idbPromise(\"categories\",\"get\").then(function(categories){dispatch({type:UPDATE_CATEGORIES,categories:categories});});}},[categoryData,loading,dispatch]);var handleClick=function handleClick(id){dispatch({type:UPDATE_CURRENT_CATEGORY,currentCategory:id});};function showNavigation(){if(Auth.loggedIn()){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"navBarContainer\"},/*#__PURE__*/React.createElement(Navbar,{expand:\"lg\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(\"div\",{className:\"navBarLogo\"},/*#__PURE__*/React.createElement(Navbar.Brand,{as:Link,to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:logoImage,className:\"d-inline-block align-top\",width:\"60\",height:\"60\",alt:\"Home\"}))),/*#__PURE__*/React.createElement(Navbar.Toggle,{\"aria-controls\":\"navbarScroll\"}),/*#__PURE__*/React.createElement(Navbar.Collapse,{id:\"navbarScroll\"},/*#__PURE__*/React.createElement(Nav,{className:\"me-auto my-2 my-lg-0\",style:{maxHeight:\"200px\"},navbarScroll:true},/*#__PURE__*/React.createElement(Nav.Link,null,/*#__PURE__*/React.createElement(Link,{to:\"/geography8\",style:{textDecoration:\"none \",color:\"black\"}},\"Grade 8 Geography\")),/*#__PURE__*/React.createElement(Nav.Link,null,/*#__PURE__*/React.createElement(Link,{to:\"/math8\",style:{textDecoration:\"none\",color:\"black\"}},\"Grade 8 Math\")),/*#__PURE__*/React.createElement(Nav.Link,null,/*#__PURE__*/React.createElement(Link,{to:\"/history8\",style:{textDecoration:\"none\",color:\"black\"}},\"Grade 8 History\")),/*#__PURE__*/React.createElement(Nav.Link,null,/*#__PURE__*/React.createElement(Link,{to:\"/science8\",style:{textDecoration:\"none\",color:\"black\"}},\"Grade 8 Science\"))),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(Nav.Link,null,/*#__PURE__*/React.createElement(Link,{to:\"/addQ\",style:{textDecoration:\"none\",color:\"black\"}},\" \",/*#__PURE__*/React.createElement(BsFillPencilFill,null),\" Add Question\")),/*#__PURE__*/React.createElement(Nav.Link,null,/*#__PURE__*/React.createElement(\"a\",{href:\"/\",onClick:function onClick(){return Auth.logout();},style:{textDecoration:\"none\",color:\"black\"}},\"Logout\"))))))));}else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"navBarContainer\"},/*#__PURE__*/React.createElement(Navbar,{expand:\"lg\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(\"div\",{className:\"navBarLogo\"},/*#__PURE__*/React.createElement(Navbar.Brand,{as:Link,to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:logoImage,className:\"d-inline-block align-top\",width:\"60\",height:\"60\",alt:\"Home\"}))),/*#__PURE__*/React.createElement(Navbar.Toggle,{\"aria-controls\":\"navbarScroll\"}),/*#__PURE__*/React.createElement(Navbar.Collapse,{id:\"navbarScroll\"},/*#__PURE__*/React.createElement(Nav,{className:\"me-auto my-2 my-lg-0\",style:{maxHeight:\"200px\"},navbarScroll:true},categories.map(function(item){return/*#__PURE__*/React.createElement(Nav.Link,{key:item._id,onClick:function onClick(){handleClick(item._id);}},item.name);})),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(Link,{to:\"/signup\",style:{textDecoration:\"none\",color:\"black\",paddingRight:\"20px\"}},\" \",/*#__PURE__*/React.createElement(BsPersonPlusFill,null),\" Signup\"),/*#__PURE__*/React.createElement(Link,{to:\"/login\",style:{textDecoration:\"none\",color:\"black\",paddingRight:\"20px\"}},\" \",/*#__PURE__*/React.createElement(BsPersonCheckFill,null),\" Login\")))))));}}return/*#__PURE__*/React.createElement(\"div\",null,showNavigation());}export default NavBar;","map":{"version":3,"sources":["C:/Users/dejay/Documents/UofT/Project 3/next-step/next-step/client/src/components/Nav/nav.js"],"names":["React","useEffect","useQuery","useQuestionContext","UPDATE_CATEGORIES","UPDATE_CURRENT_CATEGORY","QUERY_CATEGORIES","idbPromise","logoImage","Navbar","Nav","Container","BsPersonPlusFill","BsPersonCheckFill","BsFillPencilFill","Auth","Link","NavBar","state","dispatch","categories","loading","categoryData","data","console","log","type","forEach","category","then","handleClick","id","currentCategory","showNavigation","loggedIn","maxHeight","textDecoration","color","logout","map","item","_id","name","paddingRight"],"mappings":"sMAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,qBAAzB,CACA,OAASC,kBAAT,KAAmC,yBAAnC,CACA,OACIC,iBADJ,CAEIC,uBAFJ,KAGO,qBAHP,CAIA,OAASC,gBAAT,KAAiC,qBAAjC,CACA,OAASC,UAAT,KAA2B,qBAA3B,CAEA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,OAASC,MAAT,CAAiBC,GAAjB,CAAsBC,SAAtB,KAAuC,iBAAvC,CACA,OAASC,gBAAT,CAA2BC,iBAA3B,CAA8CC,gBAA9C,KAAsE,gBAAtE,CACA,MAAO,sBAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,kBAAjB,CAEA,OAASC,IAAT,KAAqB,kBAArB,CAEA,QAASC,CAAAA,MAAT,EAAkB,CACd,wBAA0Bd,kBAAkB,EAA5C,4DAAOe,KAAP,yBAAcC,QAAd,yBAEA,GAAQC,CAAAA,UAAR,CAAuBF,KAAvB,CAAQE,UAAR,CAEA,cAAwClB,QAAQ,CAACI,gBAAD,CAAhD,CAAQe,OAAR,WAAQA,OAAR,CAAuBC,YAAvB,WAAiBC,IAAjB,CAEAtB,SAAS,CAAC,UAAM,CACZ,GAAIqB,YAAJ,CAAkB,CACdE,OAAO,CAACC,GAAR,CAAYH,YAAZ,EACAH,QAAQ,CAAC,CACLO,IAAI,CAAEtB,iBADD,CAELgB,UAAU,CAAEE,YAAY,CAACF,UAFpB,CAAD,CAAR,CAIAE,YAAY,CAACF,UAAb,CAAwBO,OAAxB,CAAgC,SAACC,QAAD,CAAc,CAC1CrB,UAAU,CAAC,YAAD,CAAe,KAAf,CAAsBqB,QAAtB,CAAV,CACH,CAFD,EAGH,CATD,IASO,IAAI,CAACP,OAAL,CAAc,CACjBd,UAAU,CAAC,YAAD,CAAe,KAAf,CAAV,CAAgCsB,IAAhC,CAAqC,SAACT,UAAD,CAAgB,CACjDD,QAAQ,CAAC,CACLO,IAAI,CAAEtB,iBADD,CAELgB,UAAU,CAAEA,UAFP,CAAD,CAAR,CAIH,CALD,EAMH,CACJ,CAlBQ,CAkBN,CAACE,YAAD,CAAeD,OAAf,CAAwBF,QAAxB,CAlBM,CAAT,CAoBA,GAAMW,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,EAAD,CAAQ,CACxBZ,QAAQ,CAAC,CACLO,IAAI,CAAErB,uBADD,CAEL2B,eAAe,CAAED,EAFZ,CAAD,CAAR,CAIH,CALD,CAOA,QAASE,CAAAA,cAAT,EAA0B,CACtB,GAAIlB,IAAI,CAACmB,QAAL,EAAJ,CAAqB,CACjB,mBACI,4CACI,2BAAK,SAAS,CAAC,iBAAf,eACI,oBAAC,MAAD,EAAQ,MAAM,CAAC,IAAf,eACI,oBAAC,SAAD,EAAW,KAAK,KAAhB,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,oBAAC,MAAD,CAAQ,KAAR,EAAc,EAAE,CAAElB,IAAlB,CAAwB,EAAE,CAAE,GAA5B,eACI,2BACI,GAAG,CAAER,SADT,CAEI,SAAS,CAAC,0BAFd,CAGI,KAAK,CAAC,IAHV,CAII,MAAM,CAAC,IAJX,CAKI,GAAG,CAAC,MALR,EADJ,CADJ,CADJ,cAYI,oBAAC,MAAD,CAAQ,MAAR,EAAe,gBAAc,cAA7B,EAZJ,cAaI,oBAAC,MAAD,CAAQ,QAAR,EAAiB,EAAE,CAAC,cAApB,eACI,oBAAC,GAAD,EACI,SAAS,CAAC,sBADd,CAEI,KAAK,CAAE,CAAE2B,SAAS,CAAE,OAAb,CAFX,CAGI,YAAY,KAHhB,eAKI,oBAAC,GAAD,CAAK,IAAL,mBACI,oBAAC,IAAD,EACI,EAAE,CAAC,aADP,CAEI,KAAK,CAAE,CAAEC,cAAc,CAAE,OAAlB,CAA2BC,KAAK,CAAE,OAAlC,CAFX,sBADJ,CALJ,cAaI,oBAAC,GAAD,CAAK,IAAL,mBACI,oBAAC,IAAD,EACI,EAAE,CAAC,QADP,CAEI,KAAK,CAAE,CAAED,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAE,OAAjC,CAFX,iBADJ,CAbJ,cAqBI,oBAAC,GAAD,CAAK,IAAL,mBACI,oBAAC,IAAD,EACI,EAAE,CAAC,WADP,CAEI,KAAK,CAAE,CAAED,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAE,OAAjC,CAFX,oBADJ,CArBJ,cA6BI,oBAAC,GAAD,CAAK,IAAL,mBACI,oBAAC,IAAD,EACI,EAAE,CAAC,WADP,CAEI,KAAK,CAAE,CAAED,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAE,OAAjC,CAFX,oBADJ,CA7BJ,CADJ,cAoDI,oBAAC,GAAD,mBACI,oBAAC,GAAD,CAAK,IAAL,mBACI,oBAAC,IAAD,EAAM,EAAE,CAAC,OAAT,CAAiB,KAAK,CAAE,CAAED,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAE,OAAjC,CAAxB,mBAAqE,oBAAC,gBAAD,MAArE,iBADJ,CADJ,cAII,oBAAC,GAAD,CAAK,IAAL,mBACI,yBACI,IAAI,CAAC,GADT,CAEI,OAAO,CAAE,yBAAMtB,CAAAA,IAAI,CAACuB,MAAL,EAAN,EAFb,CAGI,KAAK,CAAE,CAAEF,cAAc,CAAE,MAAlB,CAA0BC,KAAK,CAAE,OAAjC,CAHX,WADJ,CAJJ,CApDJ,CAbJ,CADJ,CADJ,CADJ,CADJ,CAyFH,CA1FD,IA0FO,CACH,mBACI,4CACI,2BAAK,SAAS,CAAC,iBAAf,eACI,oBAAC,MAAD,EAAQ,MAAM,CAAC,IAAf,eACI,oBAAC,SAAD,EAAW,KAAK,KAAhB,eACI,2BAAK,SAAS,CAAC,YAAf,eACI,oBAAC,MAAD,CAAQ,KAAR,EAAc,EAAE,CAAErB,IAAlB,CAAwB,EAAE,CAAE,GAA5B,eACI,2BACI,GAAG,CAAER,SADT,CAEI,SAAS,CAAC,0BAFd,CAGI,KAAK,CAAC,IAHV,CAII,MAAM,CAAC,IAJX,CAKI,GAAG,CAAC,MALR,EADJ,CADJ,CADJ,cAYI,oBAAC,MAAD,CAAQ,MAAR,EAAe,gBAAc,cAA7B,EAZJ,cAaI,oBAAC,MAAD,CAAQ,QAAR,EAAiB,EAAE,CAAC,cAApB,eACI,oBAAC,GAAD,EACI,SAAS,CAAC,sBADd,CAEI,KAAK,CAAE,CAAE2B,SAAS,CAAE,OAAb,CAFX,CAGI,YAAY,KAHhB,EAKKf,UAAU,CAACmB,GAAX,CAAe,SAACC,IAAD,qBACZ,oBAAC,GAAD,CAAK,IAAL,EACI,GAAG,CAAEA,IAAI,CAACC,GADd,CAEI,OAAO,CAAE,kBAAM,CACXX,WAAW,CAACU,IAAI,CAACC,GAAN,CAAX,CACH,CAJL,EAMKD,IAAI,CAACE,IANV,CADY,EAAf,CALL,CADJ,cAiBI,oBAAC,GAAD,mBACI,oBAAC,IAAD,EACI,EAAE,CAAC,SADP,CAEI,KAAK,CAAE,CACHN,cAAc,CAAE,MADb,CAEHC,KAAK,CAAE,OAFJ,CAGHM,YAAY,CAAE,MAHX,CAFX,EAQK,GARL,cASI,oBAAC,gBAAD,MATJ,WADJ,cAYI,oBAAC,IAAD,EACI,EAAE,CAAC,QADP,CAEI,KAAK,CAAE,CACHP,cAAc,CAAE,MADb,CAEHC,KAAK,CAAE,OAFJ,CAGHM,YAAY,CAAE,MAHX,CAFX,EAQK,GARL,cASI,oBAAC,iBAAD,MATJ,UAZJ,CAjBJ,CAbJ,CADJ,CADJ,CADJ,CADJ,CAgEH,CACJ,CAED,mBAAO,+BAAMV,cAAc,EAApB,CAAP,CACH,CACD,cAAehB,CAAAA,MAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { useQuestionContext } from \"../../utils/GlobalState\";\nimport {\n    UPDATE_CATEGORIES,\n    UPDATE_CURRENT_CATEGORY,\n} from \"../../utils/actions\";\nimport { QUERY_CATEGORIES } from \"../../utils/queries\";\nimport { idbPromise } from \"../../utils/helpers\";\n\nimport logoImage from \"./assets/images/Logo.png\";\nimport { Navbar, Nav, Container } from \"react-bootstrap\";\nimport { BsPersonPlusFill, BsPersonCheckFill, BsFillPencilFill } from \"react-icons/bs\";\nimport \"./assets/css/nav.css\";\nimport Auth from \"../../utils/auth\";\n\nimport { Link } from \"react-router-dom\";\n\nfunction NavBar() {\n    const [state, dispatch] = useQuestionContext();\n\n    const { categories } = state;\n\n    const { loading, data: categoryData } = useQuery(QUERY_CATEGORIES);\n\n    useEffect(() => {\n        if (categoryData) {\n            console.log(categoryData);\n            dispatch({\n                type: UPDATE_CATEGORIES,\n                categories: categoryData.categories,\n            });\n            categoryData.categories.forEach((category) => {\n                idbPromise(\"categories\", \"put\", category);\n            });\n        } else if (!loading) {\n            idbPromise(\"categories\", \"get\").then((categories) => {\n                dispatch({\n                    type: UPDATE_CATEGORIES,\n                    categories: categories,\n                });\n            });\n        }\n    }, [categoryData, loading, dispatch]);\n\n    const handleClick = (id) => {\n        dispatch({\n            type: UPDATE_CURRENT_CATEGORY,\n            currentCategory: id,\n        });\n    };\n\n    function showNavigation() {\n        if (Auth.loggedIn()) {\n            return (\n                <div>\n                    <div className=\"navBarContainer\">\n                        <Navbar expand=\"lg\">\n                            <Container fluid>\n                                <div className=\"navBarLogo\">\n                                    <Navbar.Brand as={Link} to={\"/\"}>\n                                        <img\n                                            src={logoImage}\n                                            className=\"d-inline-block align-top\"\n                                            width=\"60\"\n                                            height=\"60\"\n                                            alt=\"Home\"\n                                        />\n                                    </Navbar.Brand>\n                                </div>\n                                <Navbar.Toggle aria-controls=\"navbarScroll\" />\n                                <Navbar.Collapse id=\"navbarScroll\">\n                                    <Nav\n                                        className=\"me-auto my-2 my-lg-0\"\n                                        style={{ maxHeight: \"200px\" }}\n                                        navbarScroll\n                                    >\n                                        <Nav.Link>\n                                            <Link\n                                                to=\"/geography8\"\n                                                style={{ textDecoration: \"none \", color: \"black\" }}\n                                            >\n                                                Grade 8 Geography\n                                            </Link>\n                                        </Nav.Link>\n                                        <Nav.Link>\n                                            <Link\n                                                to=\"/math8\"\n                                                style={{ textDecoration: \"none\", color: \"black\" }}\n                                            >\n                                                Grade 8 Math\n                                            </Link>\n                                        </Nav.Link>\n                                        <Nav.Link>\n                                            <Link\n                                                to=\"/history8\"\n                                                style={{ textDecoration: \"none\", color: \"black\" }}\n                                            >\n                                                Grade 8 History\n                                            </Link>\n                                        </Nav.Link>\n                                        <Nav.Link>\n                                            <Link\n                                                to=\"/science8\"\n                                                style={{ textDecoration: \"none\", color: \"black\" }}\n                                            >\n                                                Grade 8 Science\n                                            </Link>\n                                        </Nav.Link>\n                                        {/* {categories.map(item => (\n                                            <a\n                                            key={item._id}\n                                            href=\"/categories\"  onClick={() => {\n                                                handleClick(item._id);\n                                              }}\n                                           >\n                                                {item.name}\n                                                \n                                            </a>\n                                        ))} */}\n\n                                        {/* href={\"/categories/\"+item_id} */}\n                                    </Nav>\n                                    <Nav>\n                                        <Nav.Link>\n                                            <Link to=\"/addQ\" style={{ textDecoration: \"none\", color: \"black\" }}> <BsFillPencilFill /> Add Question</Link>\n                                        </Nav.Link>\n                                        <Nav.Link>\n                                            <a\n                                                href=\"/\"\n                                                onClick={() => Auth.logout()}\n                                                style={{ textDecoration: \"none\", color: \"black\" }}\n                                            >\n                                                Logout\n                                            </a>\n                                        </Nav.Link>\n                                    </Nav>\n                                </Navbar.Collapse>\n                            </Container>\n                        </Navbar>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div>\n                    <div className=\"navBarContainer\">\n                        <Navbar expand=\"lg\">\n                            <Container fluid>\n                                <div className=\"navBarLogo\">\n                                    <Navbar.Brand as={Link} to={\"/\"}>\n                                        <img\n                                            src={logoImage}\n                                            className=\"d-inline-block align-top\"\n                                            width=\"60\"\n                                            height=\"60\"\n                                            alt=\"Home\"\n                                        />\n                                    </Navbar.Brand>\n                                </div>\n                                <Navbar.Toggle aria-controls=\"navbarScroll\" />\n                                <Navbar.Collapse id=\"navbarScroll\">\n                                    <Nav\n                                        className=\"me-auto my-2 my-lg-0\"\n                                        style={{ maxHeight: \"200px\" }}\n                                        navbarScroll\n                                    >\n                                        {categories.map((item) => (\n                                            <Nav.Link\n                                                key={item._id}\n                                                onClick={() => {\n                                                    handleClick(item._id);\n                                                }}\n                                            >\n                                                {item.name}\n                                            </Nav.Link>\n                                        ))}\n                                    </Nav>\n                                    <Nav>\n                                        <Link\n                                            to=\"/signup\"\n                                            style={{\n                                                textDecoration: \"none\",\n                                                color: \"black\",\n                                                paddingRight: \"20px\",\n                                            }}\n                                        >\n                                            {\" \"}\n                                            <BsPersonPlusFill /> Signup\n                                        </Link>\n                                        <Link\n                                            to=\"/login\"\n                                            style={{\n                                                textDecoration: \"none\",\n                                                color: \"black\",\n                                                paddingRight: \"20px\",\n                                            }}\n                                        >\n                                            {\" \"}\n                                            <BsPersonCheckFill /> Login\n                                        </Link>\n                                    </Nav>\n                                </Navbar.Collapse>\n                            </Container>\n                        </Navbar>\n                    </div>\n                </div>\n            );\n        }\n    }\n\n    return <div>{showNavigation()}</div>;\n}\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}