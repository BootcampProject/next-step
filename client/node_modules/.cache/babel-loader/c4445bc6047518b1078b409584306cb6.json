{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar graphql_1 = require(\"graphql\");\n\nvar ExtractField =\n/** @class */\nfunction () {\n  function ExtractField(_a) {\n    var from = _a.from,\n        to = _a.to;\n    this.from = from;\n    this.to = to;\n  }\n\n  ExtractField.prototype.transformRequest = function (originalRequest) {\n    var _a, _b;\n\n    var fromSelection;\n    var ourPathFrom = JSON.stringify(this.from);\n    var ourPathTo = JSON.stringify(this.to);\n    var fieldPath = [];\n    graphql_1.visit(originalRequest.document, (_a = {}, _a[graphql_1.Kind.FIELD] = {\n      enter: function (node) {\n        fieldPath.push(node.name.value);\n\n        if (ourPathFrom === JSON.stringify(fieldPath)) {\n          fromSelection = node.selectionSet;\n          return graphql_1.BREAK;\n        }\n      },\n      leave: function (node) {\n        fieldPath.pop();\n      }\n    }, _a));\n    fieldPath = [];\n    var newDocument = graphql_1.visit(originalRequest.document, (_b = {}, _b[graphql_1.Kind.FIELD] = {\n      enter: function (node) {\n        fieldPath.push(node.name.value);\n\n        if (ourPathTo === JSON.stringify(fieldPath) && fromSelection) {\n          return __assign(__assign({}, node), {\n            selectionSet: fromSelection\n          });\n        }\n      },\n      leave: function (node) {\n        fieldPath.pop();\n      }\n    }, _b));\n    return __assign(__assign({}, originalRequest), {\n      document: newDocument\n    });\n  };\n\n  return ExtractField;\n}();\n\nexports.default = ExtractField;","map":{"version":3,"sources":["../../src/transforms/ExtractField.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AAGA,IAAA,YAAA;AAAA;AAAA,YAAA;AAIE,WAAA,YAAA,CAAY,EAAZ,EAAoE;QAAtD,IAAA,GAAA,EAAA,CAAA,I;QAAM,EAAA,GAAA,EAAA,CAAA,E;AAClB,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,EAAL,GAAU,EAAV;AACD;;AAEM,EAAA,YAAA,CAAA,SAAA,CAAA,gBAAA,GAAP,UAAwB,eAAxB,EAAgD;;;AAC9C,QAAI,aAAJ;AACA,QAAM,WAAW,GAAG,IAAI,CAAC,SAAL,CAAe,KAAK,IAApB,CAApB;AACA,QAAM,SAAS,GAAG,IAAI,CAAC,SAAL,CAAe,KAAK,EAApB,CAAlB;AACA,QAAI,SAAS,GAAkB,EAA/B;AACA,IAAA,SAAA,CAAA,KAAA,CAAM,eAAe,CAAC,QAAtB,GAA8B,EAAA,GAAA,EAAA,EAC5B,EAAA,CAAC,SAAA,CAAA,IAAA,CAAK,KAAN,CAAA,GAAc;AACZ,MAAA,KAAK,EAAE,UAAC,IAAD,EAAgB;AACrB,QAAA,SAAS,CAAC,IAAV,CAAe,IAAI,CAAC,IAAL,CAAU,KAAzB;;AACA,YAAI,WAAW,KAAK,IAAI,CAAC,SAAL,CAAe,SAAf,CAApB,EAA+C;AAC7C,UAAA,aAAa,GAAG,IAAI,CAAC,YAArB;AACA,iBAAO,SAAA,CAAA,KAAP;AACD;AACF,OAPW;AAQZ,MAAA,KAAK,EAAE,UAAC,IAAD,EAAgB;AACrB,QAAA,SAAS,CAAC,GAAV;AACD;AAVW,KADc,EAa5B,EAbF;AAeA,IAAA,SAAS,GAAG,EAAZ;AACA,QAAM,WAAW,GAAG,SAAA,CAAA,KAAA,CAAM,eAAe,CAAC,QAAtB,GAA8B,EAAA,GAAA,EAAA,EAChD,EAAA,CAAC,SAAA,CAAA,IAAA,CAAK,KAAN,CAAA,GAAc;AACZ,MAAA,KAAK,EAAE,UAAC,IAAD,EAAgB;AACrB,QAAA,SAAS,CAAC,IAAV,CAAe,IAAI,CAAC,IAAL,CAAU,KAAzB;;AACA,YAAI,SAAS,KAAK,IAAI,CAAC,SAAL,CAAe,SAAf,CAAd,IAA2C,aAA/C,EAA8D;AAC5D,iBAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACK,IADL,CAAA,EACS;AACP,YAAA,YAAY,EAAE;AADP,WADT,CAAA;AAID;AACF,OATW;AAUZ,MAAA,KAAK,EAAE,UAAC,IAAD,EAAgB;AACrB,QAAA,SAAS,CAAC,GAAV;AACD;AAZW,KADkC,EAehD,EAfkB,EAApB;AAgBA,WAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACK,eADL,CAAA,EACoB;AAClB,MAAA,QAAQ,EAAE;AADQ,KADpB,CAAA;AAID,GAzCM;;AA0CT,SAAA,YAAA;AAAC,CAnDD,EAAA","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graphql_1 = require(\"graphql\");\nvar ExtractField = /** @class */ (function () {\n    function ExtractField(_a) {\n        var from = _a.from, to = _a.to;\n        this.from = from;\n        this.to = to;\n    }\n    ExtractField.prototype.transformRequest = function (originalRequest) {\n        var _a, _b;\n        var fromSelection;\n        var ourPathFrom = JSON.stringify(this.from);\n        var ourPathTo = JSON.stringify(this.to);\n        var fieldPath = [];\n        graphql_1.visit(originalRequest.document, (_a = {},\n            _a[graphql_1.Kind.FIELD] = {\n                enter: function (node) {\n                    fieldPath.push(node.name.value);\n                    if (ourPathFrom === JSON.stringify(fieldPath)) {\n                        fromSelection = node.selectionSet;\n                        return graphql_1.BREAK;\n                    }\n                },\n                leave: function (node) {\n                    fieldPath.pop();\n                },\n            },\n            _a));\n        fieldPath = [];\n        var newDocument = graphql_1.visit(originalRequest.document, (_b = {},\n            _b[graphql_1.Kind.FIELD] = {\n                enter: function (node) {\n                    fieldPath.push(node.name.value);\n                    if (ourPathTo === JSON.stringify(fieldPath) && fromSelection) {\n                        return __assign(__assign({}, node), { selectionSet: fromSelection });\n                    }\n                },\n                leave: function (node) {\n                    fieldPath.pop();\n                },\n            },\n            _b));\n        return __assign(__assign({}, originalRequest), { document: newDocument });\n    };\n    return ExtractField;\n}());\nexports.default = ExtractField;\n//# sourceMappingURL=ExtractField.js.map"]},"metadata":{},"sourceType":"script"}