{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PubSub = void 0;\n\nvar events_1 = require(\"events\");\n\nvar pubsub_engine_1 = require(\"./pubsub-engine\");\n\nvar PubSub = function (_super) {\n  __extends(PubSub, _super);\n\n  function PubSub(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.ee = options.eventEmitter || new events_1.EventEmitter();\n    _this.subscriptions = {};\n    _this.subIdCounter = 0;\n    return _this;\n  }\n\n  PubSub.prototype.publish = function (triggerName, payload) {\n    this.ee.emit(triggerName, payload);\n    return Promise.resolve();\n  };\n\n  PubSub.prototype.subscribe = function (triggerName, onMessage) {\n    this.ee.addListener(triggerName, onMessage);\n    this.subIdCounter = this.subIdCounter + 1;\n    this.subscriptions[this.subIdCounter] = [triggerName, onMessage];\n    return Promise.resolve(this.subIdCounter);\n  };\n\n  PubSub.prototype.unsubscribe = function (subId) {\n    var _a = this.subscriptions[subId],\n        triggerName = _a[0],\n        onMessage = _a[1];\n    delete this.subscriptions[subId];\n    this.ee.removeListener(triggerName, onMessage);\n  };\n\n  return PubSub;\n}(pubsub_engine_1.PubSubEngine);\n\nexports.PubSub = PubSub;","map":{"version":3,"sources":["../src/pubsub.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,QAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AACA,IAAA,eAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;;AAMA,IAAA,MAAA,GAAA,UAAA,MAAA,EAAA;AAA4B,EAAA,SAAA,CAAA,MAAA,EAAA,MAAA,CAAA;;AAK1B,WAAA,MAAA,CAAY,OAAZ,EAAuC;AAA3B,QAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,OAAA,GAAA,EAAA;AAA2B;;AAAvC,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IADT;;AAEE,IAAA,KAAI,CAAC,EAAL,GAAU,OAAO,CAAC,YAAR,IAAwB,IAAI,QAAA,CAAA,YAAJ,EAAlC;AACA,IAAA,KAAI,CAAC,aAAL,GAAqB,EAArB;AACA,IAAA,KAAI,CAAC,YAAL,GAAoB,CAApB;;AACD;;AAEM,EAAA,MAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,WAAf,EAAoC,OAApC,EAAgD;AAC9C,SAAK,EAAL,CAAQ,IAAR,CAAa,WAAb,EAA0B,OAA1B;AACA,WAAO,OAAO,CAAC,OAAR,EAAP;AACD,GAHM;;AAKA,EAAA,MAAA,CAAA,SAAA,CAAA,SAAA,GAAP,UAAiB,WAAjB,EAAsC,SAAtC,EAAyE;AACvE,SAAK,EAAL,CAAQ,WAAR,CAAoB,WAApB,EAAiC,SAAjC;AACA,SAAK,YAAL,GAAoB,KAAK,YAAL,GAAoB,CAAxC;AACA,SAAK,aAAL,CAAmB,KAAK,YAAxB,IAAwC,CAAC,WAAD,EAAc,SAAd,CAAxC;AAEA,WAAO,OAAO,CAAC,OAAR,CAAgB,KAAK,YAArB,CAAP;AACD,GANM;;AAQA,EAAA,MAAA,CAAA,SAAA,CAAA,WAAA,GAAP,UAAmB,KAAnB,EAAgC;AACxB,QAAA,EAAA,GAA2B,KAAK,aAAL,CAAmB,KAAnB,CAA3B;AAAA,QAAC,WAAW,GAAA,EAAA,CAAA,CAAA,CAAZ;AAAA,QAAc,SAAS,GAAA,EAAA,CAAA,CAAA,CAAvB;AACN,WAAO,KAAK,aAAL,CAAmB,KAAnB,CAAP;AACA,SAAK,EAAL,CAAQ,cAAR,CAAuB,WAAvB,EAAoC,SAApC;AACD,GAJM;;AAKT,SAAA,MAAA;AAAC,CA9BD,CAA4B,eAAA,CAAA,YAA5B,CAAA;;AAAa,OAAA,CAAA,MAAA,GAAA,MAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PubSub = void 0;\nvar events_1 = require(\"events\");\nvar pubsub_engine_1 = require(\"./pubsub-engine\");\nvar PubSub = (function (_super) {\n    __extends(PubSub, _super);\n    function PubSub(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.ee = options.eventEmitter || new events_1.EventEmitter();\n        _this.subscriptions = {};\n        _this.subIdCounter = 0;\n        return _this;\n    }\n    PubSub.prototype.publish = function (triggerName, payload) {\n        this.ee.emit(triggerName, payload);\n        return Promise.resolve();\n    };\n    PubSub.prototype.subscribe = function (triggerName, onMessage) {\n        this.ee.addListener(triggerName, onMessage);\n        this.subIdCounter = this.subIdCounter + 1;\n        this.subscriptions[this.subIdCounter] = [triggerName, onMessage];\n        return Promise.resolve(this.subIdCounter);\n    };\n    PubSub.prototype.unsubscribe = function (subId) {\n        var _a = this.subscriptions[subId], triggerName = _a[0], onMessage = _a[1];\n        delete this.subscriptions[subId];\n        this.ee.removeListener(triggerName, onMessage);\n    };\n    return PubSub;\n}(pubsub_engine_1.PubSubEngine));\nexports.PubSub = PubSub;\n//# sourceMappingURL=pubsub.js.map"]},"metadata":{},"sourceType":"script"}